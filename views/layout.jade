
doctype html
html(ng-app='subsonic')
  head
    title= title
    link(rel='stylesheet', href='/node_modules/bootstrap/dist/css/bootstrap.min.css')
    link(rel='stylesheet', href='/node_modules/@fortawesome/fontawesome-free/css/all.min.css')
    link(rel='stylesheet', href='/node_modules/datatables.net-dt/css/jquery.dataTables.min.css')
    link(rel='stylesheet', href='/node_modules/angular-datatables/dist/css/angular-datatables.min.css')
    link(rel='stylesheet', href='/node_modules/angular-datatables/dist/plugins/bootstrap/datatables.bootstrap.min.css')
    link(href='https://fonts.googleapis.com/icon?family=Material+Icons', rel='stylesheet')
    link(rel='stylesheet', href='/CSS/style.css')
  body#page-top
    
    #body-row.row
      include nav.jade  
      .loader 
      ng-view.content.content-wide.animate-bottom
      include sidenav.jade
      include footer.jade
    
    script.
      if (typeof module === 'object') {window.module = module; module = undefined;}
    script(src="/node_modules/jquery/dist/jquery.min.js")
    script(src="/node_modules/datatables.net/js/jquery.dataTables.min.js")
    script(src="/node_modules/datatables.net-dt/js/dataTables.dataTables.min.js")
    script(src="/node_modules/jquery-easing/dist/jquery.easing.1.3.umd.min.js")
    script(src="/node_modules/@fortawesome/fontawesome-free/js/all.min.js")
    script(src="/socket.io/socket.io.js")
    script(src="/node_modules/socket.io-stream/socket.io-stream.js")
    script(src="/node_modules/bootstrap/dist/js/bootstrap.min.js")
    script(src="/node_modules/moment/min/moment-with-locales.min.js")
    script(src="/node_modules/angular/angular.min.js")
    script(src="/node_modules/angular-route/angular-route.min.js")
    script(src="/node_modules/angular-datatables/dist/angular-datatables.min.js")
    script(src="/node_modules/angular-datatables/dist/plugins/bootstrap/angular-datatables.bootstrap.min.js")
    script(src="/node_modules/angular-datatables/dist/plugins/buttons/angular-datatables.buttons.min.js")
    script.
      if (window.module) module = window.module;
    script(src="/JS/dataTables.pageResize.min.js")
    script(src="/JS/subsonic.js")
    script(src="/factories/factory.subsonic.js")
    script(src="/controllers/controller.home.js")
    script(src="/controllers/controller.status.js")
    script(src="/controllers/controller.music.js")
    script(src="/controllers/controller.settings.js")
    script(src="/JS/index.js")
  script.
    // Hide submenus
    $('#body-row .collapse').collapse('hide'); 

    // Collapse/Expand icon
    $('#collapse-icon').addClass('fa-angle-double-left'); 

    // Collapse click
    $('[data-toggle=sidebar-colapse]').click(function() {
        SidebarCollapse();
    });

    function SidebarCollapse () {
        $('.menu-collapsed').toggleClass('d-none');
        $('.sidebar-submenu').toggleClass('d-none');
        $('.submenu-icon').toggleClass('d-none');
        $('.content').toggleClass('content-wide');
        $('#sidebar-container').toggleClass('sidebar-expanded sidebar-collapsed');
        
        // Treating d-flex/d-none on separators with title
        var SeparatorTitle = $('.sidebar-separator-title');
        if ( SeparatorTitle.hasClass('d-flex') ) {
            SeparatorTitle.removeClass('d-flex');
        } else {
            SeparatorTitle.addClass('d-flex');
        }
        
        // Collapse/Expand icon
        $('#collapse-icon').toggleClass('fa-angle-double-left fa-angle-double-right');
    }
