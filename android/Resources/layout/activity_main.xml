<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.widget.DrawerLayout
	xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/drawer_layout"
    android:theme="@style/AppTheme.NoActionBar"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true"
	android:background="@color/menu_default_background"
    tools:openDrawer="start"
    tools:context=".MainActivity">

	<ImageView
		android:id="@+id/primary_background"
		android:layout_width="match_parent"
		android:layout_height="match_parent"
		android:layout_centerInParent="true"/>
	<ImageView
		android:id="@+id/secondary_background"
		android:layout_width="match_parent"
		android:layout_height="match_parent"
		android:layout_centerInParent="true"/>

	<Alloy.Widgets.SlidingUpPanelLayout
		xmlns:android="http://schemas.android.com/apk/res/android"
		xmlns:tools="http://schemas.android.com/tools"
		xmlns:sothree="http://schemas.android.com/apk/res-auto"
		android:id="@+id/main_layout"
		android:layout_width="match_parent"
		android:layout_height="match_parent"
		android:gravity="bottom"
		sothree:umanoPanelHeight="68dp"
		sothree:umanoShadowHeight="4dp"
		sothree:umanoParallaxOffset="100dp"
		sothree:umanoDragView="@+id/dragView"
		sothree:umanoOverlay="true"
		sothree:umanoScrollableView="@+id/list"

		android:background="@android:color/transparent" >

		

		<!-- MAIN CONTENT -->
		<FrameLayout
			android:id="@+id/flContent"
			android:layout_width="match_parent"
			android:layout_height="fill_parent"
			android:orientation="vertical"
			android:background="@android:color/transparent">
		</FrameLayout>

		<!-- SLIDING LAYOUT -->
		<LinearLayout
			android:layout_width="match_parent"
			android:layout_height="match_parent"
			android:background="@color/menu_solid_background"
			android:orientation="vertical"
			android:clickable="true"
			android:focusable="false"
			
			android:id="@+id/dragView">

			<FrameLayout
				android:id="@+id/controls_container"
				android:layout_width="match_parent"
				android:layout_height="68dp"
				android:layout_alignParentBottom="true"
				app:layout_scrollFlags="scroll|enterAlways"
				android:orientation="horizontal"
				android:background="@color/menu_default_background">

				<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
					xmlns:tools="http://schemas.android.com/tools"
					android:id="@+id/fragment_playback_controls"
					android:layout_width="match_parent"
					android:layout_alignParentBottom="true"
					android:layout_height="68dp"
					android:background="@color/menu_default_background"
					android:padding="@dimen/playback_controls_padding">
					<ImageView
						android:id="@+id/album_art"
						android:transitionName="now_playing_transition"
						android:background="@color/menu_default_background"
						android:layout_height="68dp"
						android:layout_width="68dp"
						android:scaleType="centerCrop"
						android:contentDescription="@string/currently_playing_song"
						android:layout_alignParentLeft="true"/>
					<LinearLayout
						android:id="@+id/content"
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:background="@android:color/transparent"
						android:layout_marginStart="@dimen/playback_controls_margin"
						android:layout_marginEnd="@dimen/playback_controls_margin"
						android:orientation="vertical"
						android:layout_toRightOf="@id/album_art"
						android:layout_toLeftOf="@+id/previous_button"
						android:layout_centerVertical="true"
						android:layout_centerHorizontal="true">
						<TextView
							android:id="@+id/title"
							android:singleLine="true"
							android:ellipsize="marquee"
							android:background="@android:color/transparent"
							android:marqueeRepeatLimit="marquee_forever"
							android:scrollHorizontally="true"
							android:focusable="true"
							android:focusableInTouchMode="true"
							android:freezesText="true"
							android:maxLines="1"
							android:layout_width="wrap_content"
							android:layout_height="wrap_content"
							android:contentDescription="@string/currently_playing_song"
							android:textAppearance="?android:attr/textAppearanceMedium"
							android:textColor="#FFF"
							android:shadowColor="#000"
							android:shadowDx="1"
							android:shadowDy="1"
							android:shadowRadius="1"/>
						<TextView
							android:id="@+id/artist"
							android:ellipsize="end"
							android:maxLines="1"
							android:background="@android:color/transparent"
							android:layout_width="wrap_content"
							android:layout_height="wrap_content"
							android:contentDescription="@string/currently_playing_artist"
							android:textAppearance="?android:attr/textAppearanceSmall"
							android:textColor="#FFF"
							android:shadowColor="#000"
							android:shadowDx="0"
							android:shadowDy="0"
							android:shadowRadius="5"/>
						<TextView
							android:id="@+id/extra_info"
							android:ellipsize="end"
							android:maxLines="1"
							android:layout_width="wrap_content"
							android:layout_height="wrap_content"
							android:visibility="gone"
							android:background="@android:color/transparent"
							android:contentDescription="@string/currently_playing_extra_info"
							android:textAppearance="?android:attr/textAppearanceSmall"
							android:textColor="#FFF"
							android:shadowColor="#000"
							android:shadowDx="0"
							android:shadowDy="0"
							android:shadowRadius="5"/>
					</LinearLayout>

					<ImageButton
						android:id="@+id/previous_button"
						android:layout_centerVertical="true"
						android:layout_width="?attr/actionBarSize"
						android:layout_height="?attr/actionBarSize"
						android:layout_toLeftOf="@+id/play_pause_button"
						android:scaleType="fitCenter"
						android:background="?selectableItemBackgroundBorderless"
						android:src="@drawable/previous"
						android:contentDescription="@string/play_pause"/>

					<ImageButton
						android:id="@+id/play_pause_button"
						android:layout_height="?attr/actionBarSize"
						android:layout_width="?attr/actionBarSize"
						android:scaleType="fitCenter"
						android:layout_toLeftOf="@+id/next_button"
						android:background="?selectableItemBackgroundBorderless"
						android:src="@drawable/play"
						android:contentDescription="@string/play_pause"/>

					<ImageButton
						android:id="@+id/next_button"
						android:layout_centerVertical="true"
						android:layout_width="?attr/actionBarSize"
						android:layout_height="?attr/actionBarSize"
						android:layout_alignParentRight="true"
						android:scaleType="fitCenter"
						android:background="?selectableItemBackgroundBorderless"
						android:layout_marginRight="15dp"
						android:src="@drawable/next"
						android:contentDescription="@string/play_pause"/>

				</RelativeLayout>



			</FrameLayout>

			<ListView
				android:id="@+id/main_playlist"
				android:background="@color/menu_solid_background"
				android:layout_width="match_parent"
				android:layout_height="0dp"
				android:layout_weight="1">
			</ListView>
		</LinearLayout>
	</Alloy.Widgets.SlidingUpPanelLayout>


	<android.support.design.widget.NavigationView
		android:id="@+id/nav_view"
		android:layout_width="match_parent"
		android:layout_height="match_parent"
		android:layout_gravity="start"
		android:background="@android:color/transparent"
		android:fitsSystemWindows="true"
		app:itemBackground="@android:color/transparent"
		app:itemIconTint="@color/menu_text_color"
		app:itemTextColor="@color/menu_text_color">


		<LinearLayout
			android:layout_width="match_parent"
			android:layout_height="match_parent"
			android:background="@color/menu_default_background"
			android:orientation="vertical">


			<ListView
				android:id="@+id/main_menu_list"
				android:layout_width="match_parent"
				android:layout_height="0dp"
				android:choiceMode="singleChoice"
				android:listSelector="@color/menu_selection_color"
				android:cacheColorHint="@android:color/transparent"
				android:background="@android:color/transparent"
				android:layout_weight="1"/>

			<LinearLayout
				android:id="@+id/bottom_button_bar"
				android:layout_width="match_parent"
				android:layout_height="48dp"
				android:layout_alignParentBottom="true"
				android:layout_below="@+id/main_menu_list"
				android:background="@android:color/transparent"
				android:clickable="true"
				android:maxHeight="100dp"
				android:minHeight="100dp"
				android:orientation="horizontal">

				<TextView
					android:id="@+id/settings_footer"
					android:layout_width="match_parent"
					android:layout_height="match_parent"
					android:layout_alignParentBottom="true"
					android:background="@android:color/transparent"
					android:gravity="center"
					android:text="Settings"
					android:textColor="#FFF" />
			</LinearLayout>
		</LinearLayout>
	</android.support.design.widget.NavigationView>
</android.support.v4.widget.DrawerLayout>